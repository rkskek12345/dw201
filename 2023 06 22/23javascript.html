<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미로미로미로</title>
    <script>
         var map=[
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,1,1,0,2],
            [1,0,1,1,1,1,1,1,1,1,0,0,1,0,1],
            [1,0,1,0,0,0,0,0,0,1,1,0,1,0,1],
            [1,0,1,0,1,1,1,1,0,1,0,0,1,0,1],
            [1,0,1,0,1,1,0,0,0,1,0,1,1,0,1],
            [1,0,1,0,1,0,0,1,0,1,0,0,1,0,1],
            [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
            [1,0,0,0,1,0,0,0,1,0,0,0,1,0,1],
            [1,1,1,1,1,0,1,0,1,1,0,1,1,0,1],
            [1,0,0,0,1,0,1,0,1,1,0,0,1,0,1],
            [1,0,1,0,1,0,1,0,0,1,1,0,1,0,1],
            [1,0,1,0,1,1,1,1,0,1,1,0,1,0,1],
            [1,3,1,0,0,0,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];
        var tableX=map[0].length;
        var tableY=map.length;
         
        var nowX=1;
        var nowY=13;

        function madeMap(){        
            var strTable="";
            strTable="<table border=1>";
                for(var y=0;y<tableY;y++){
                    strTable+="<tr>";
                        for(var x=0;x<tableX;x++){
                            strTable+=`<td id=y${y}x${x} width=30 height=30>`;
                            strTable+="</td>";
                        }
                    strTable+="<tr>";    
                }
            strTable+="</table>";
            return strTable;
        }
        function changeColor(id,color){
            document.getElementById(id).style.backgroundColor=color;

        }
        function copyArray(){
            for(var y=0;y<tableY;y++){
                for(var x=0;x<tableX;x++){
                    switch(map[y][x]){
                        case 0:
                        changeColor(`y${y}x${x}`,'white');
                        break;
                        case 1:
                        changeColor(`y${y}x${x}`,'lightpink');
                        break;
                        case 2:
                        changeColor(`y${y}x${x}`,'red');
                        break;
                        case 3:
                            document.getElementById(`y${y}x${x}`).innerHTML=
                            `<img src=kkkobuk.png width=25 height=25>`;
                        break;
                        default:
                        break;


                    }
                }
            }
        }

            

        window.onload=function(){
            document.getElementById('console').innerHTML=madeMap();
            copyArray();
        }
        

        function isMove(y,x){
            if(map[y][x]==0){
                return 1;
            }else if(map[y][x]==1){
                return 0;
            }else if(map[y][x]==2){
                return 2;
            }
        }

        function inputFunction(e){
            
            switch(e){
                case 56:
                    switch (isMove(nowY-1,nowX)){
                        case 0: 
                        break;
                        case 1:
                        document.getElementById(`y${nowY}x${nowX}`).innerHTML='';
                    nowY--;
                    document.getElementById(`y${nowY}x${nowX}`).innerHTML=
                    `<img src=kkkobuk.png width=25 height=25>`;
                        break;
                        case 2:
                        alert('드디어 탈출!!!')
                        break;  
                    }
                break;
                                              
                case 52:  
                    switch (isMove(nowY,nowX-1)){
                        case 0: 
                        break;
                        case 1:
                        document.getElementById(`y${nowY}x${nowX}`).innerHTML='';
                    nowX--;
                    document.getElementById(`y${nowY}x${nowX}`).innerHTML=
                    `<img src=kkkobuk.png width=25 height=25>`;
                        break;
                        case 2:
                        alert('드디어 탈출!!!')
                        break;  
                    }                      
                break;

                case 54:  
                    switch (isMove(nowY,nowX+1)){
                        case 0: 
                        break;
                        case 1:
                        document.getElementById(`y${nowY}x${nowX}`).innerHTML='';
                    nowX++;
                    document.getElementById(`y${nowY}x${nowX}`).innerHTML=
                    `<img src=kkkobuk.png width=25 height=25>`; 
                        break;
                        case 2:
                        alert('드디어 탈출!!!')
                        break;  
                    }
                break;

                case 50:
                    switch (isMove(nowY+1,nowX)){
                        case 0: 
                        break;
                        case 1:
                        document.getElementById(`y${nowY}x${nowX}`).innerHTML='';
                    nowY++;
                    document.getElementById(`y${nowY}x${nowX}`).innerHTML=
                    `<img src=kkkobuk.png width=25 height=25>`;                        
                        break;
                        case 2:
                        alert('드디어 탈출!!!')
                        break;  
                    }
                break;
                
            }    
        }
  
 


    </script>
</head>
<body onkeypress="inputFunction(event.keyCode);">
    <div id=console></div>
</body>
</html>